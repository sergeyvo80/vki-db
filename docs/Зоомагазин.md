# Зоомагазин

- [Зоомагазин](#зоомагазин)
  - [Описание предметной области](#описание-предметной-области)
    - [В данной области включены следующие основные составляющие:](#в-данной-области-включены-следующие-основные-составляющие)
  - [Создание ER диаграммы](#создание-er-диаграммы)
    - [Техническое задание на разработку ER-диаграммы для системы учета зоомагазина](#техническое-задание-на-разработку-er-диаграммы-для-системы-учета-зоомагазина)
      - [Введение](#введение)
      - [Требования к сущностям](#требования-к-сущностям)
  - [Создание базы данных](#создание-базы-данных)
  - [Тестовые данные](#тестовые-данные)
  - [Запросы](#запросы)
    - [1. Базовые запросы для анализа данных](#1-базовые-запросы-для-анализа-данных)
    - [2. Аналитические запросы](#2-аналитические-запросы)
    - [3. Запросы для управления запасами](#3-запросы-для-управления-запасами)
    - [4. Финансовые отчеты](#4-финансовые-отчеты)
    - [5. Запросы для бизнес-аналитики](#5-запросы-для-бизнес-аналитики)
    - [6. Специальные запросы для отчетности](#6-специальные-запросы-для-отчетности)
    - [7. Практические запросы для ежедневного использования](#7-практические-запросы-для-ежедневного-использования)
  - [Техническое задание на разработку приложения](#техническое-задание-на-разработку-приложения)
    - [1. Общие сведения](#1-общие-сведения)
      - [1.1. Наименование проекта](#11-наименование-проекта)
      - [1.2. Технологический стек](#12-технологический-стек)
    - [2. Функциональные требования](#2-функциональные-требования)
      - [2.1. Модуль управления товарами](#21-модуль-управления-товарами)
      - [2.2. Модуль управления запасами](#22-модуль-управления-запасами)
      - [2.3. Модуль продаж](#23-модуль-продаж)
      - [2.4. Модуль заказов](#24-модуль-заказов)
      - [2.5. Модуль отчетности](#25-модуль-отчетности)
    - [3. Технические требования](#3-технические-требования)
      - [3.1. Архитектура приложения](#31-архитектура-приложения)
      - [3.2. Требования к базе данных](#32-требования-к-базе-данных)
      - [3.3. Entity Framework требования](#33-entity-framework-требования)
    - [4. Интерфейс пользователя](#4-интерфейс-пользователя)
      - [4.1. Главное окно](#41-главное-окно)
      - [4.2. Модульные окна](#42-модульные-окна)
    - [5. Реализация функционала](#5-реализация-функционала)
      - [5.1. Обязательные к реализации функции](#51-обязательные-к-реализации-функции)
      - [5.2. Требования к коду](#52-требования-к-коду)
    - [6. Конкретные задачи для реализации](#6-конкретные-задачи-для-реализации)
      - [Задача 1: Настройка проекта и базы данных](#задача-1-настройка-проекта-и-базы-данных)
      - [Задача 2: Модуль товаров](#задача-2-модуль-товаров)
      - [Задача 3: Модуль запасов](#задача-3-модуль-запасов)
      - [Задача 4: Модуль продаж](#задача-4-модуль-продаж)
      - [Задача 5: Отчетность](#задача-5-отчетность)
    - [7. Критерии оценки](#7-критерии-оценки)
      - [7.1. Обязательные критерии](#71-обязательные-критерии)



## Описание предметной области
Основная цель учёта товаров в зоомагазине - эффективное управление ассортиментом, запасами и продажами с целью удовлетворения потребностей клиентов и максимизации прибыли. Эта предметная область широко используется в сфере розничной торговли, особенно в специализированных магазинах для домашних животных.

Предметная область учёта товаров в зоомагазине касается процесса управления продукцией, продажами и взаимодействием с клиентами.

### В данной области включены следующие основные составляющие:
1) Товар: это информация о продукции, предлагающейся в зоомагазине. Каждый товар включает данные о названии, категории (корма, аксессуары, средства ухода и т.д.), описании, цене и количестве на складе.
2) Регистрация товара: этот процесс включает прием и запись новой продукции в систему учета. Важными аспектами регистрации являются присвоение уникального идентификатора товару, сохранение информации о поставщике и условиях хранения.
3) Управление запасами: процесс, включающий контроль остатков товаров на складе, анализ их движения и определение необходимости пополнения запасов. Важно отслеживать минимальные и максимальные уровни запасов для предотвращения дефицита или избытка товара.
4) Обработка заказов: это процесс приема, обработки и выполнения заказов клиентов. Включает подтверждение наличия товара, формирование счета и организацию доставки (если предусмотрено).
5) Продажа товара: фактическая реализация продукции клиентам. На этом этапе происходит взаимодействие с клиентами, оформление продажи, прием платежей и предоставление чеков.
6) Отчетность и информирование: важной составляющей учета товаров в зоомагазине является фиксация и отчет о продажах, остатках и движении товаров. После завершения отчетного периода необходимо формировать отчеты о выручке, популярности товаров и других важных показателях.
7) Мониторинг и анализ: этот этап предполагает контроль и анализ процессов учета товаров в зоомагазине. Важно отслеживать и анализировать продажи, предпочтения клиентов, расходы на закупку и другие параметры, которые могут помочь в оптимизации и улучшении работы магазина.

## Создание ER диаграммы

### Техническое задание на разработку ER-диаграммы для системы учета зоомагазина

#### Введение
   
- Наименование проекта: ER-диаграмма для системы управления товарами, продажами и запасами зоомагазина.

- Цель проекта: Разработать концептуальную и логическую ER-диаграмму, которая будет являться основой для проектирования реляционной базы данных. Диаграмма должна наглядно отображать сущности предметной области и связи между ними, обеспечивая целостность и непротиворечивость данных.

- Описание предметной области: Система предназначена для автоматизации процессов учета в зоомагазине, включая управление ассортиментом товаров, контроль запасов на складе, обработку заказов и продаж, взаимодействие с поставщиками и клиентами, а также формирование отчетности.

#### Требования к сущностям

На основе описания предметной области необходимо выделить следующие сущности и их атрибуты.

## Создание базы данных 
Ознакомиться с [материалом](https://github.com/goryachkinama/db-practice/blob/main/src/Lab0.md)

Написать запросы для создания взяв за основу ER диаграмму
- Базы данных
- Все таблицы согласно ER-диаграмме
- Связи между таблицами через внешние ключи
- Индексы для улучшения производительности
- Представление для удобного просмотра заявок

Особенности реализации:
- Использовать IDENTITY(1,1) для автоинкремента первичных ключей
- Добавлены проверки (CHECK) для валидации данных
- Создать индексы на часто используемых полях
- Включить ограничения NOT NULL где это необходимо
- Добавить представление для удобства работы с данными
- Для создание первичного ключа и внешних ключей используйте [CONSTRAINT](https://github.com/goryachkinama/db-practice/blob/main/src/Lab0.md)

Создать индексы на идентификаторы и другие поля если нужно

пример: CREATE INDEX IX_RepairRequests_ClientId ON RepairRequests(client_id);

## Тестовые данные
Комплексные запросы для заполнения базы данных тестовыми данными, которые отражают реальные бизнес-процессы.

- Логически связаны между собой (клиенты создают заявки, сотрудники выполняют их и т.д.)
- Охватывают разные сценарии (разные статусы заявок, приоритеты, типы услуг)
- Включают реалистичные данные с адресами, телефонами, комментариями
- Содержат разнообразные отзывы с разными оценками
- Учитывают использование материалов в разных количествах


После выполнения скрипта вы получите полностью рабочую базу данных с тестовыми данными для демонстрации и тестирования функциональности системы учета клининговых услуг.


## Запросы

### 1. Базовые запросы для анализа данных
- 1.1. Все товары с информацией о категориях и поставщиках
- 1.2. Остатки товаров на складах
- 1.3. Продажи за период с детализацией


### 2. Аналитические запросы
- 2.3. Топ-5 самых продаваемых товаров
- 2.4. Клиенты с наибольшими покупками
- 2.5. Ежемесячная статистика продаж по категориям

### 3. Запросы для управления запасами
- 3.1. Товары, требующие пополнения (ниже минимального уровня)
- 3.2. Оборот товаров (приход vs расход)

### 4. Финансовые отчеты
- 4.1. Ежедневный отчет о продажах
- 4.2. Маржинальность по категориям

### 5. Запросы для бизнес-аналитики
- 5.1. Анализ клиентской базы
- 5.2. Эффективность поставщиков
- 5.3. Сегментация клиентов по частоте покупок

### 6. Специальные запросы для отчетности
- 6.1. Отчет по товарам с низкой оборачиваемостью
- 6.2. Кросс-продажи (какие товары покупают вместе)

### 7. Практические запросы для ежедневного использования
- 7.1. Сегодняшние продажи (для кассира)
- 7.2. Быстрый просмотр остатков по категориям

Эти тестовые запросы покрывают все основные аспекты работы зоомагазина: от ежедневных операций до стратегического анализа. Вы можете выполнять их в своей SQL-среде для тестирования базы данных и получения полезной бизнес-информации.



## Техническое задание на разработку приложения

### 1. Общие сведения
   
#### 1.1. Наименование проекта
Разработка desktop-приложения "ZooShop Inventory" для учета товаров в зоомагазине

#### 1.2. Технологический стек
- Язык программирования: C#
- Платформа: .NET 8.0
- UI Framework: WPF (Windows Presentation Foundation)
- ORM: Entity Framework Core 8.0 (Database First подход)
- База данных: Microsoft SQL Server
- Дополнительно: SQLCommand для сложных запросов

### 2. Функциональные требования
#### 2.1. Модуль управления товарами
- Просмотр списка товаров с фильтрацией и поиском
- Добавление/редактирование/удаление товаров
- Управление категориями товаров
- Просмотр остатков на складах
- Управление минимальными/максимальными уровнями запасов

#### 2.2. Модуль управления запасами
- Отслеживание остатков товаров на складах
- Ведение учета перемещений товаров
- Автоматическое оповещение о низких запасах
- История изменений остатков

#### 2.3. Модуль продаж
- Оформление продаж товаров
- Работа с чеками и возвратами
- Учет покупателей
- История продаж по клиентам

#### 2.4. Модуль заказов
- Создание заказов от поставщиков
- Отслеживание статусов заказов
- Управление позициями заказов

#### 2.5. Модуль отчетности
- Отчет по продажам за период
- Отчет по движению товаров
- Отчет по остаткам
- Анализ популярности товаров

### 3. Технические требования
#### 3.1. Архитектура приложения
````
ZooShop.Inventory/
├── ZooShop.Inventory.Core/          # Core библиотека
├── ZooShop.Inventory.Data/          # Data layer (EF, модели)
├── ZooShop.Inventory.Business/      # Business logic
├── ZooShop.Inventory.WPF/           # WPF приложение
└── ZooShop.Inventory.Tests/         # Unit tests
````

#### 3.2. Требования к базе данных
- Использование предоставленной ER-диаграммы
- Реализация всех таблиц и связей
- Наличие индексов для оптимизации
- Ограничения целостности данных

#### 3.3. Entity Framework требования
- Подход Database First
- Автоматическая генерация моделей из БД
- Миграции базы данных
- LINQ запросы для CRUD операций
- Использование SQLCommand для сложных отчетов

### 4. Интерфейс пользователя
#### 4.1. Главное окно
- Меню навигации между модулями
- Панель быстрого доступа к часто используемым функциям
- Статусная строка с информацией о системе
- Уведомления о низких запасах

#### 4.2. Модульные окна
- Окно товаров: таблица с товарами, фильтры, кнопки действий
- Окно продаж: форма оформления продажи, выбор товаров, клиента
- Окно запасов: визуализация остатков, цветовая индикация уровней
- Окно отчетов: выбор параметров отчета, просмотр, экспорт

### 5. Реализация функционала
#### 5.1. Обязательные к реализации функции

```
// Пример структуры репозиториев
public interface IProductRepository
{
    Task<List<Product>> GetProductsAsync();
    Task<Product> GetProductByIdAsync(int id);
    Task AddProductAsync(Product product);
    Task UpdateProductAsync(Product product);
    Task DeleteProductAsync(int id);
    Task<List<Product>> GetLowStockProductsAsync();
}

// Пример сервисного слоя
public class ProductService
{
    private readonly IProductRepository _productRepository;
    
    public async Task<List<ProductViewModel>> GetProductsWithStockInfoAsync()
    {
        // Использование LINQ через EF
    }
    
    public async Task<ReportResult> GenerateSalesReportAsync(DateTime from, DateTime to)
    {
        // Использование SQLCommand для сложных запросов
    }
}
```

#### 5.2. Требования к коду
- Принципы SOLID
- Паттерн MVVM для WPF
- Dependency Injection
- Асинхронное программирование
- Валидация входных данных
- Обработка исключений

### 6. Конкретные задачи для реализации

#### Задача 1: Настройка проекта и базы данных
- Создать решение Visual Studio с проектами
- Настроить базу данных по предоставленной схеме
- Реализовать Database First подход с EF Core
- Настроить DI контейнер

#### Задача 2: Модуль товаров
- Создать модели и DbContext
- Реализовать репозиторий товаров
- Создать WPF окно управления товарами
- Реализовать CRUD операции
- Добавить поиск и фильтрацию

#### Задача 3: Модуль запасов
- Реализовать управление остатками
- Создать систему уведомлений о низких запасах
- Визуализировать уровни запасов
- Реализовать историю движений

#### Задача 4: Модуль продаж
- Реализовать оформление продаж
- Создать работу с чеками
- Реализовать учет клиентов
- Добавить историю продаж

#### Задача 5: Отчетность
- Реализовать отчет по продажам (SQLCommand)
- Создать отчет по остаткам
- Реализовать анализ популярности товаров
- Добавить экспорт отчетов

### 7. Критерии оценки

#### 7.1. Обязательные критерии
- Приложение компилируется без ошибок
- Все модули реализованы согласно ТЗ
- Корректная работа с базой данных
- Использование EF Database First
- Применение SQLCommand для отчетов
- Грамотный UI/UX

<!-- #### 7.2. Дополнительные критерии (плюс в оценку)
- Unit тесты (покрытие > 70%)
- Логирование операций
- Валидация данных на клиенте и сервере
- Красивый и современный UI
- Оптимизация производительности
- Документация кода -->

<!-- #### 7.3. Штрафные баллы
- Нарушение принципов SOLID
- Отсутствие обработки исключений
- SQL инъекции в запросах
- Утечки памяти
- Блокирующие UI операции -->